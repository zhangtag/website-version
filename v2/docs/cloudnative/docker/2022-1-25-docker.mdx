---
# id: 2022-1-25-docker
# description: Dockerå¸¸ç”¨å‘½ä»¤
# # slug: åŸç†ç¯‡ï¼šCANä¸CANOpenåŸºç¡€
title: ğŸ‡ Dockerå¸¸ç”¨å‘½ä»¤
sidebar_position: 2
# tags:
#     - P 1.3
   #  - Work needed
---

# é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ
* é˜¿é‡Œäº‘åå°
* å®¹å™¨é•œåƒåŠ é€Ÿ
* æŒ‰ç…§æç¤ºæ·»åŠ å‘½ä»¤  
 ![1.6](/img/docker/docker/1.1.png)

# Dockerå‘½ä»¤
## åŸºæœ¬å‘½ä»¤
```shell
docker version          #æŸ¥çœ‹dockerçš„ç‰ˆæœ¬ä¿¡æ¯
docker info             #æŸ¥çœ‹dockerçš„ç³»ç»Ÿä¿¡æ¯,åŒ…æ‹¬é•œåƒå’Œå®¹å™¨çš„æ•°é‡
docker å‘½ä»¤ --help       #å¸®åŠ©å‘½ä»¤(å¯æŸ¥çœ‹å¯é€‰çš„å‚æ•°)
docker COMMAND --help
```
## é•œåƒå‘½ä»¤
### æŸ¥çœ‹æœ¬åœ°ä¸»æœºçš„æ‰€æœ‰é•œåƒ
```shell
[root@z ~]# docker images
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
hello-world   latest    bf756fb1ae65   11 months ago   13.3kB
#è§£é‡Š:
1.REPOSITORY  é•œåƒçš„ä»“åº“æº
2.TAG  é•œåƒçš„æ ‡ç­¾
3.IMAGE ID é•œåƒçš„id
4.CREATED é•œåƒçš„åˆ›å»ºæ—¶é—´
5.SIZE é•œåƒçš„å¤§å°

#å¯é€‰å‚æ•°
-a/--all åˆ—å‡ºæ‰€æœ‰é•œåƒ
-q/--quiet åªæ˜¾ç¤ºé•œåƒçš„id
```

### æœç´¢é•œåƒ
```shell
[root@z ~]# docker search mysql
NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
mysql                             MySQL is a widely used, open-source relationâ€¦   10308     [OK]
mariadb                           MariaDB is a community-developed fork of MySâ€¦   3819      [OK]
mysql/mysql-server                Optimized MySQL Server Docker images. Createâ€¦   754                  [OK]
percona                           Percona Server is a fork of the MySQL relatiâ€¦   517       [OK]
centos/mysql-57-centos7           MySQL 5.7 SQL database server                   86
mysql/mysql-cluster               Experimental MySQL Cluster Docker images. Crâ€¦   79
centurylink/mysql                 Image containing mysql. Optimized to be linkâ€¦   60                   [OK]


#å¯é€‰å‚æ•°

Search the Docker Hub for images

Options:
  -f, --filter filter   Filter output based on conditions provided
      --format string   Pretty-print search using a Go template
      --limit int       Max number of search results (default 25)
      --no-trunc        Don't truncate output
      
      
#æœç´¢æ”¶è—æ•°å¤§äº3000çš„é•œåƒ
[root@z ~]# docker search mysql --filter=STARS=3000
NAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
mysql     MySQL is a widely used, open-source relationâ€¦   10308     [OK]
mariadb   MariaDB is a community-developed fordockerk of MySâ€¦   3819      [OK]
```
### ä¸‹è½½é•œåƒ
```shell
[root@z ~]# docker pull mysql
Using default tag: latest            #å¦‚æœä¸å†™tagé»˜è®¤å°±æ˜¯latest
latest: Pulling from library/mysql
6ec7b7d162b2: Pull complete          #åˆ†å±‚ä¸‹è½½,docker imageçš„æ ¸å¿ƒ-è”åˆæ–‡ä»¶ç³»ç»Ÿ
fedd960d3481: Pull complete
7ab947313861: Pull complete
64f92f19e638: Pull complete
3e80b17bff96: Pull complete
014e976799f9: Pull complete
59ae84fee1b3: Pull complete
ffe10de703ea: Pull complete
657af6d90c83: Pull complete
98bfb480322c: Pull complete
6aa3859c4789: Pull complete
1ed875d851ef: Pull complete
Digest: sha256:78800e6d3f1b230e35275145e657b82c3fb02a27b2d8e76aac2f5e90c1c30873 #ç­¾å
Status: Downloaded newer image for mysql:latest
docker.io/library/mysql:latest  #ä¸‹è½½æ¥æºçš„çœŸå®åœ°å€  #docker pull mysqlç­‰ä»·äºdocker pull docker.io/library/mysql:latest
#æŒ‡å®šç‰ˆæœ¬ä¸‹è½½
[root@z ~]# docker pull mysql:5.7
5.7: Pulling from library/mysql
6ec7b7d162b2: Already exists
fedd960d3481: Already exists
7ab947313861: Already exists
64f92f19e638: Already exists
3e80b17bff96: Already exists
014e976799f9: Already exists
59ae84fee1b3: Already exists
7d1da2a18e2e: Pull complete
301a28b700b9: Pull complete
529dc8dbeaf3: Pull complete
bc9d021dc13f: Pull complete
Digest: sha256:c3a567d3e3ad8b05dfce401ed08f0f6bf3f3b64cc17694979d5f2e5d78e10173
Status: Downloaded newer image for mysql:5.7
docker.io/library/mysql:5.7
```

### åˆ é™¤é•œåƒ
```shell
#1.åˆ é™¤æŒ‡å®šçš„é•œåƒid
[root@z ~]# docker rmi -f  é•œåƒid
#2.åˆ é™¤å¤šä¸ªé•œåƒid
[root@z ~]# docker rmi -f  é•œåƒid é•œåƒid é•œåƒid
#3.åˆ é™¤å…¨éƒ¨çš„é•œåƒid
[root@z ~]# docker rmi -f  $(docker images -aq)
```

## å®¹å™¨å‘½ä»¤

### æ‹‰å–ä¸€ä¸ªå®¹å™¨

```shell
docker pull centos #centosä¸ºä¾‹
```

### è¿è¡Œå®¹å™¨

```shell
docker run [å¯é€‰å‚æ•°] image

#å‚æ•°è¯´æ˜
--name="åå­—"           æŒ‡å®šå®¹å™¨åå­—
-d                     åå°æ–¹å¼è¿è¡Œ
-it                    ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œ,è¿›å…¥å®¹å™¨æŸ¥çœ‹å†…å®¹
-p                     æŒ‡å®šå®¹å™¨çš„ç«¯å£
(
-p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£  é…ç½®ä¸»æœºç«¯å£æ˜ å°„åˆ°å®¹å™¨ç«¯å£
-p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£
-p å®¹å™¨ç«¯å£
)
-P                     éšæœºæŒ‡å®šç«¯å£(å¤§å†™çš„P)
```

### è¿›å…¥å®¹å™¨

```shell
[root@z ~]# docker run -it centos /bin/bash
[root@z /]# ls      
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
```

### é€€å‡ºå®¹å™¨

```shell
#exit åœæ­¢å¹¶é€€å‡ºå®¹å™¨ï¼ˆåå°æ–¹å¼è¿è¡Œåˆ™ä»…é€€å‡ºï¼‰
#Ctrl+P+Q  ä¸åœæ­¢å®¹å™¨é€€å‡º
[root@z /]# exit
exit
[root@z ~]#
```

### åˆ—å‡ºè¿è¡Œè¿‡çš„å®¹å™¨

```shell
#docker ps 
     # åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨
-a   # åˆ—å‡ºæ‰€æœ‰å®¹å™¨çš„è¿è¡Œè®°å½•
-n=? # æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨
-q   # åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·


[root@z ~]# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
[root@z ~]# docker ps -a
CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES
bca129320bb5   centos         "/bin/bash"   4 minutes ago   Exited (0) 3 minutes ago             optimistic_shtern
z   centos         "/bin/bash"   6 minutes ago   Exited (0) 5 minutes ago             cool_tesla
cf6adbf1b506   bf756fb1ae65   "/hello"      5 hours ago     Exited (0) 5 hours ago               optimistic_darwin
```

### åˆ é™¤å®¹å™¨

```shell
docker rm å®¹å™¨id                 #åˆ é™¤æŒ‡å®šçš„å®¹å™¨,ä¸èƒ½åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨,å¼ºåˆ¶åˆ é™¤ä½¿ç”¨ rm -f
docker rm -f $(docker ps -aq)   #åˆ é™¤æ‰€æœ‰çš„å®¹å™¨
docker ps -a -q|xargs docker rm #åˆ é™¤æ‰€æœ‰çš„å®¹å™¨
```

### å¯åŠ¨å’Œåœæ­¢å®¹å™¨

```shell
docker start å®¹å™¨id          #å¯åŠ¨å®¹å™¨
docker restart å®¹å™¨id        #é‡å¯å®¹å™¨
docker stop å®¹å™¨id           #åœæ­¢å½“å‰è¿è¡Œçš„å®¹å™¨
docker kill å®¹å™¨id           #å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨
docker stop $(docker ps -a -q) 	#åœæ­¢æ‰€æœ‰å®¹å™¨
```



